add_executable(Dumb Dumb.cpp)
install(TARGETS Dumb RUNTIME DESTINATION "bin/tests")
add_test(NAME Dumb COMMAND Dumb)

if(DEFINED ENV{INSTALL_ROOT})
  if($ENV{INSTALL_ROOT} STREQUAL "true")
    message(STATUS "ROOT should be installed. Compiling the ROOT tests")
    find_package(ROOT REQUIRED)
    # This is required for ROOT < 6.16
    if(${ROOT_VERSION} VERSION_LESS 6.16)
      string(REPLACE "-L " "-L" ROOT_EXE_LINKER_FLAGS "${ROOT_EXE_LINKER_FLAGS}")
    endif()
    # This is required on if there is more than one flag (like on macOS)
    separate_arguments(ROOT_EXE_LINKER_FLAGS)
    add_executable(ROOT ROOT.cpp)
    target_link_libraries(ROOT PUBLIC ROOT::Core PUBLIC ${ROOT_LIBRARIES} )
    install(TARGETS ROOT RUNTIME DESTINATION "bin/tests")
    add_test(NAME ROOT COMMAND ROOT)
  endif()
endif()
